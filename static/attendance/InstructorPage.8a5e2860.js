function e(e,t,s,a){Object.defineProperty(e,t,{get:s,set:a,enumerable:!0,configurable:!0})}var t=globalThis.parcelRequire2e1e,s=t.register;s("5EpUM",function(s,a){Object.defineProperty(s.exports,"__esModule",{value:!0,configurable:!0}),e(s.exports,"default",()=>d);var n=t("ayMG0"),l=t("acw62"),r=t("6usw5"),o=t("jEyqx"),i=t("8Qx3l"),c=t("8oTda"),d=({allAttendance:e,classDetails:t})=>{let[s,a]=(0,l.useState)(new Set),[d,x]=(0,l.useState)(new Set);return(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)(c.default,{student:!1,classDetails:t}),(0,n.jsxs)("div",{className:"fixed top-10 right-4 z-50 flex gap-2 ",children:[s.size>0&&(0,n.jsxs)("div",{className:"font-medium gap-1 text-center",children:[(0,n.jsx)("span",{className:"font-bold text-xl",children:s.size}),(0,n.jsx)(o.FontAwesomeIcon,{icon:i.faSyncAlt,spin:!0,size:"2x",color:"blue"})]}),d.size>0&&(0,n.jsxs)("div",{className:"font-medium gap-1 text-center",children:[(0,n.jsx)("span",{className:"font-bold text-xl",children:d.size}),(0,n.jsx)(o.FontAwesomeIcon,{icon:i.faCircleExclamation,size:"2x",color:"red"})]}),""]}),(0,n.jsx)("div",{className:"h-full w-full",children:(0,n.jsxs)("table",{className:"w-full mt-8 text-left bg-white border border-gray-300",children:[(0,n.jsx)("thead",{className:"bg-gray-200 sticky top-0 z-40",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"py-2",children:"#"}),(0,n.jsx)("th",{className:"py-2",children:"Name"}),(0,n.jsx)("th",{className:"py-2",children:"Email"}),(0,n.jsx)("th",{className:"py-2",children:"Attendance"}),(0,n.jsx)("th",{className:"py-2 text-center",children:"Change to"})]})}),(0,n.jsx)("tbody",{className:"overflow-y-scroll",children:e.map((e,t)=>(0,n.jsxs)("tr",{className:t%2==0?"bg-gray-100":"bg-white",children:[(0,n.jsx)("td",{className:"py-2",children:t+1}),(0,n.jsx)(r.default,{student:e,onSyncStart:e=>{},onSyncComplete:e=>{},onSyncFailed:e=>{}})]},e.mail))})]})})]})}}),s("6usw5",function(s,a){e(s.exports,"default",()=>d);var n=t("ayMG0"),l=t("acw62"),r=t("i4KJr"),o=t("8Qx3l"),i=t("jEyqx");let c={Updated:1,Syncing:2,Failed:3};var d=({student:e,onSyncStart:t,onSyncComplete:s,onSyncFailed:a})=>{var d;let[x,m]=(0,l.useState)(""),[u,h]=(0,l.useState)(c.Updated),y=e.status!==(x||e.status),f="z-10 ring-2 ring-blue-700 text-blue-700";function p(n){u!==c.Syncing&&(h(c.Syncing),t(e.mail),m(n),(0,r.default)(e.mail,n).then(t=>{e.status=t.status,h(c.Updated),s(e.mail)}).catch(()=>{h(c.Failed),a(e.mail)}))}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("td",{className:"py-2",children:e.name}),(0,n.jsx)("td",{className:"py-2",children:e.mail}),(0,n.jsxs)("td",{className:"py-2 pr-2",children:[u===c.Updated&&(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:`${"Present"===(d=e.status)?"text-sky-700":"Absent"===d?"text-red-700":"Proxy"===d?"text-red-950":""}`,children:e.status}),y&&(0,n.jsx)(i.FontAwesomeIcon,{icon:o.faExclamation,size:"2x",color:"red"})]}),u===c.Syncing&&(0,n.jsx)(i.FontAwesomeIcon,{icon:o.faSyncAlt,spin:!0,size:"2x",color:"blue"}),u===c.Failed&&(0,n.jsx)(i.FontAwesomeIcon,{icon:o.faArrowRotateRight,onClick:function(){p(x)},size:"2x",color:"red"})]}),(0,n.jsx)("td",{className:"py-2 flex items-center",children:(0,n.jsxs)("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:[(0,n.jsx)("button",{disabled:u===c.Syncing,type:"button",className:`px-4 py-2 text-sm font-medium text-gray-900 bg-white border rounded-s-lg hover:bg-gray-100 hover:text-blue-700 ${"Present"===x?f:""}`,onClick:()=>{p("Present")},children:"Present"}),(0,n.jsx)("button",{type:"button",className:`px-4 py-2 text-sm font-medium text-gray-900 bg-white border hover:bg-gray-100 hover:text-blue-700  ${"Absent"===x?f:""}`,onClick:()=>{p("Absent")},children:"Absent"}),(0,n.jsx)("button",{type:"button",className:`px-4 py-2 text-sm font-medium text-gray-900 bg-white border  rounded-e-lg hover:bg-gray-100 hover:text-blue-700  ${"Proxy"===x?f:""}`,onClick:()=>{p("Proxy")},children:"Proxy"})]})})]})}}),s("i4KJr",function(t,s){e(t.exports,"default",()=>a);var a=function(e,t){return new Promise(async(s,a)=>{try{let n=await fetch(markAttendanceURL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mail:e.toLowerCase(),status:t.toLowerCase()})});if(n.ok){let e=await n.json();console.log(`Attendance of ${e.mail} marked to ${e.status}`),s(e)}else a()}catch(e){a(),console.error("Error fetching JSON data:",e)}finally{}})}}),s("8oTda",function(s,a){e(s.exports,"default",()=>o);var n=t("ayMG0");t("acw62");var l=t("jEyqx"),r=t("8Qx3l"),o=({classDetails:e,student:t})=>(0,n.jsxs)("div",{className:"w-full flex justify-between",children:[(0,n.jsx)("h2",{className:"text-3xl font-medium",children:e.name}),(0,n.jsxs)("div",{className:"flex justify-evenly gap-4",children:[t&&(0,n.jsxs)("a",{className:"text-blue-600",href:"/accounts/login",children:[(0,n.jsx)(l.FontAwesomeIcon,{icon:r.faLink,size:"1x",color:"blue"}),"login"]}),t&&(0,n.jsx)("p",{children:"This page is updated every 5 min"}),t||(0,n.jsxs)("a",{href:`${getAttendanceURL+"download/"}`,className:"px-4 py-2 text-sm font-medium text-gray-900 bg-gray-300 border rounded-s-lg hover:bg-gray-100 hover:text-blue-700",children:[(0,n.jsx)(l.FontAwesomeIcon,{icon:r.faDownload,size:"1x",color:"blue"}),"Export to CSV"]})]})]})});
//# sourceMappingURL=InstructorPage.8a5e2860.js.map
